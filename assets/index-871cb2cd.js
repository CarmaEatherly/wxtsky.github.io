import{r as s,h as A,j as t}from"./index-97b4f576.js";import{B as r}from"./index-d8a95316.js";import{D as W}from"./index-63e2e216.js";import{A as E}from"./index-f256ec3a.js";import{S as P,m as l}from"./index-090400ec.js";import{I as f}from"./index-37b2add3.js";import{B as U}from"./button-363d567d.js";import{a as b}from"./index-e0045e8b.js";import"./index-eba01287.js";import"./getDataOrAriaProps-cf91de79.js";import"./useMergedState-8fc71bbf.js";function K(){const[o,w]=s.useState(),{userAddress:p}=r(e=>({userAddress:e.userAddress})),{Provider:h}=r(e=>({Provider:e.Provider})),{ownerContractAddress:B}=r(e=>({ownerContractAddress:e.ownerContractAddress})),{ownerContractABI:S}=r(e=>({ownerContractABI:e.ownerContractABI})),{BEP20TokenInfo:c}=r(e=>({BEP20TokenInfo:e.BEP20TokenInfo})),{WBNBAddress:T}=r(e=>({WBNBAddress:e.WBNBAddress})),{USDTAddress:v}=r(e=>({USDTAddress:e.USDTAddress})),[a,y]=s.useState(),[i,C]=s.useState(p),[d,I]=s.useState(1),[x,n]=s.useState(!1),[D,u]=s.useState(!0);return s.useEffect(()=>{console.log(i,d,o,a),c.address!==void 0&&(i!==""&&d>0&&o==="USDT"||o==="WBNB"&&a>0)?u(!1):u(!0)},[i,d,c.address,o,a]),A("div",{style:{width:"80%",marginTop:"3%",marginLeft:"10%",marginRight:"10%"},children:[t(W,{orientation:"center",children:"卖出"}),t(E,{message:"什么池子卖成什么币,卖之前确定好池子",type:"warning",style:{textAlign:"center"}}),A(P,{defaultValue:"选择池子",style:{width:"100%",marginTop:"3%",textAlign:"center"},onChange:e=>w(e),children:[t(Option,{value:"选择池子",disabled:!0,style:{textAlign:"center"},children:"选择池子"}),t(Option,{value:"WBNB",style:{textAlign:"center"},children:"WBNB"}),t(Option,{value:"USDT",style:{textAlign:"center"},children:"USDT"})]}),t(f,{addonBefore:"卖出地址数量",style:{width:"100%",marginTop:"3%"},value:d,onChange:e=>I(e.target.value)}),t(f,{addonBefore:"符合数量高于多少的地址",style:{width:"100%",marginTop:"3%"},value:a,onChange:e=>y(e.target.value)}),t(f,{addonBefore:"卖出转移地址",style:{width:"100%",marginTop:"3%"},value:i,onChange:e=>C(e.target.value)}),t(U,{type:"primary",style:{width:"100%",marginTop:"3%"},loading:x,disabled:D,onClick:()=>{try{n(!0);let e=[c.address,o==="WBNB"?T:v];const N=new b(B,S,h),V=[e,0,a*1e4,d,i];window.ethereum.request({method:"eth_sendTransaction",params:[{from:p,to:B,data:N.interface.encodeFunctionData("sell",V)}]}).then(m=>{h.waitForTransaction(m).then(g=>{g.status===1?(l.success({content:"卖出成功",duration:1}),n(!1)):(l.error({content:"卖出失败",duration:1}),n(!1))}).catch(g=>{l.error({content:g.message,duration:1}),n(!1)})}).catch(m=>{l.error({content:m.message,duration:1}),n(!1)})}catch(e){l.error({content:e.message,duration:1}),n(!1)}},children:"卖出"})]})}export{K as default};
